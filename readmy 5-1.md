#Домашнее задание к занятию "5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения."

- Задача 1
Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

Там где есть прямое общение ОС с железом - там нет виртуализации.
Термин "полна (аппаратная)" виртуализация вводит в заблуждение. Всегда есть промежуточный слой между железом и системами виртуализации. Просто есть вариант работы, когда промежуточная ОС содержит необходимый и достаточный набор компонент от производителя, включая компоненты ОС, а есть вариант установки на не подготовленную ОС с избыточным для виртуализации ПО.  Есть некоторые ОС, которые имеют встроенную систему виртуализации.
Разница в числе драйверов, утилит и, самое главное, в уровне изолированности ВМ.

- Задача 2
Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.
Организация серверов:
физические сервера,
паравиртуализация,
виртуализация уровня ОС.

- Условия использования:
Высоконагруженная база данных, чувствительная к отказу.
Различные web-приложения.
Windows системы для использования бухгалтерским отделом.
Системы, выполняющие высокопроизводительные расчеты на GPU.
Опишите, почему вы выбрали к каждому целевому использованию такую организацию.

Использование виртуализации для одного сервера, да еще и высоконагруженного, не логично. Претпочтителен физический сервер (в кластере, если БД нужня всегда) и внешнее хранилище. Не будет накладных расходов на производительность, которые неизбежно накладывает виртуализация. Как правило высоконагруженные сервера БД расходуют много ресурсов железа. Теряется главный смысл - полная утилизация ресурсов. Серверу БД и так отдают все ресурсы. Хотя если бы была уже построенная система с типом "полная (аппаратная)", то я бы всё равно встроил сервер с БД в неё. Это даёт ряд преимуществ по администрированию и отказоустойчивости.
Использование в одной организации нескольких разных систем виртуализации считаю ошибкой. Это создаёт кучу трудностей по обслуживанию и, в конечном итоге, большим расходам на содержание. Надо использовать одну максимально универсальную систему для всех ВМ. Как итог - все виртуалки и сервисы запускать в одной системе типа "полная (аппаратная)".
Но так как такой нет в вариантах, то паравиртуализация.
Виртуализация уровня ОС полезна для возможности запуска утилит, которых не существует в вашей ОС. Никакие севисы я бы в ней не использовал.

- Задача 3
Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

- Сценарии:
100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.

100 ВМ - подходящий сценарий для начала работы с VMware Vsphere. Все требования закрывает. 
Хотя подойдёт и HyperV. Есть особенности при работе с Linux, но они не существенны, если основные сервисы под Windows.

- Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.

Тут выберу Xen PV. Имеет нормальную производительность и надёжность.

- Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.

HyperV под Windows.

- Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

VirtualBox или KVM. Для тестирования подойдёт любая бесплатная среда. 

Вообще странные рассуждения, конечно. Лучше использовать ту среду, где есть опыт использования. И не стоит использовать ту, где опыта нет. Даже для тестовой среды это черевато проблемами. Так же стоит учитывать развитие компании, её будущие потребности, интеграцию с различными другими сервисами. Например внешнюю систему резервного копирования или работу пользователей на тонком клиенте. У VMware более ста отдельных и развиваемых продуктов, связанных с виртуализацией. Жаль, что уходят с рынка России.

- Задача 4
Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

В каждой системе управления виртуализацией придётся выстраивать взаимодействие с другими системами. Например сервер для сквозной авторизации, шлюз удалённого доступа, WEB шлюз и т.п. Использование нескольких систем управления виртуализацией одновременно потребует держать удвоенное число хостов свободными для отказоустойчивости по железу, по количеству систем. Когда всё в одной системе - проще мониторить. Единый центр обновлений. Единый центр управления, центр распределения нагрузки, общие политики, общие ресурсы и многое другое. Короче - я категорически против нескольких сред в продуктиве. И даже для тестовой среды лучше использовать ту же вирт. систему.
Для минимизации проблем надо грамотное руководство, которе умеет планировать, подбирать персонал под задачи и не менять долгосрочные планы под сиюминутные нужды, разводя зоопарк вирт. систем.


